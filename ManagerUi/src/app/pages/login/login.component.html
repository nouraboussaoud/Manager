<div class="login-container">
  <div class="login-wrapper">
    <div class="login-card">
      <form clrForm class="login-form" (ngSubmit)="login()" #loginForm="ngForm">
        <!-- Header Section -->
        <div class="header-section">
          <div class="logo-container">
            <div class="logo-icon">
              <clr-icon shape="shield" size="32"></clr-icon>
            </div>
          </div>
          <h1 class="brand-title">MMC Manager</h1>
          <div class="divider"></div>
        </div>

        <!-- Error Alert -->
        <div 
          *ngIf="errorMsg.length > 0" 
          class="custom-alert alert-danger">
          <div class="alert-content">
            <clr-icon shape="exclamation-triangle" class="alert-icon"></clr-icon>
            <div class="alert-messages">
              <div *ngFor="let error of errorMsg" class="alert-message">
                {{ error }}
              </div>
            </div>
            <button 
              type="button" 
              class="alert-close"
              (click)="errorMsg = []; showGeneralError = false"
              aria-label="Close alert">
              <clr-icon shape="times"></clr-icon>
            </button>
          </div>
        </div>

        <!-- Form Fields -->
        <div class="form-section">
          <!-- Email Input -->
          <div class="form-group">
            <label class="form-label">Email Address</label>
            <input 
              clrInput 
              type="email" 
              name="email"
              [(ngModel)]="authRequest.email"
              required
              placeholder="Enter your email address"
              #email="ngModel" 
              autocomplete="email"
              (blur)="onEmailBlur()"
              [class.invalid]="emailTouched && getEmailError()"
              class="form-control" />
            <clr-control-error *ngIf="emailTouched && getEmailError()">
              {{ getEmailError() }}
            </clr-control-error>
          </div>

          <!-- Password Input -->
          <div class="form-group">
            <label class="form-label">Password</label>
            <div class="password-wrapper">
              <input 
                [type]="showPassword ? 'text' : 'password'"
                name="password"
                [(ngModel)]="authRequest.password"
                required
                placeholder="Enter your password"
                #password="ngModel"
                autocomplete="current-password"
                (blur)="onPasswordBlur()"
                [class.invalid]="passwordTouched && getPasswordError()"
                class="form-control" />
              <button 
                type="button"
                class="eye-button"
                (click)="togglePasswordVisibility()"
                [attr.aria-label]="showPassword ? 'Hide password' : 'Show password'">
                <clr-icon *ngIf="!showPassword" shape="eye"></clr-icon>
                <clr-icon *ngIf="showPassword" shape="eye-hide"></clr-icon>
              </button>
            </div>
            <clr-control-error *ngIf="passwordTouched && getPasswordError()">
              {{ getPasswordError() }}
            </clr-control-error>
          </div>
        </div>

        <!-- Submit Button -->
        <button 
          type="submit" 
          class="btn btn-primary login-btn"
          [disabled]="!isFormValid() || isLoading">
          <clr-spinner *ngIf="isLoading" clrInline clrSmall class="btn-spinner"></clr-spinner>
          <clr-icon *ngIf="!isLoading" shape="login" size="16" class="btn-icon"></clr-icon>
          <span *ngIf="!isLoading">Sign In</span>
          <span *ngIf="isLoading">Authenticating...</span>
        </button>

        <!-- Footer Section -->
        <div class="footer-section">
          <div class="help-text">
            <p>Need access to the system? 
              <a href="javascript:void(0)" (click)="register()" class="help-link">Request Account</a>
            </p>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>

<style>
  .form-group {
    margin-bottom: 1rem;
  }

  .form-label {
    display: block; /* Ensure labels stay on a single line */
    margin-bottom: 0.5rem;
    font-weight: bold;
    white-space: nowrap; /* Prevent labels from wrapping */
  }

  .form-control {
    width: 100%;
    box-sizing: border-box;
    padding: 0.5rem;
    border: 1px solid #ccc;
    border-radius: 4px;
  }

  .password-wrapper {
    display: flex;
    align-items: center;
  }

  .eye-button {
    margin-left: 0.5rem;
    background: none;
    border: none;
    cursor: pointer;
  }
</style>